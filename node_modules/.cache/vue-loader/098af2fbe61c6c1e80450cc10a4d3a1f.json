{"remainingRequest":"/Users/apple/Desktop/DECO3801/searchMedicineGit/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/DECO3801/searchMedicineGit/src/components/searchMedicine/checkoutMedicine.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/DECO3801/searchMedicineGit/src/components/searchMedicine/checkoutMedicine.vue","mtime":1634376556804},{"path":"/Users/apple/Desktop/DECO3801/searchMedicineGit/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/DECO3801/searchMedicineGit/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/DECO3801/searchMedicineGit/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/apple/Desktop/DECO3801/searchMedicineGit/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/DECO3801/searchMedicineGit/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBNZWRpY2luZVRpdGxlIGZyb20gIkAvY29tcG9uZW50cy9NZWRpY2luZVRpdGxlIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHFzIGZyb20gInFzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJjaGVja291dE1lZGljaW5lIiwKICAgIGNvbXBvbmVudHM6IHsKICAgIE1lZGljaW5lVGl0bGUsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgICBjYXJ0Ont9LAogICAgICAgIHByaWNlOiAiIiwKICAgICAgICBhZGRyZXNzOiB7fSwKICAgICAgICBwcm9kdWN0U3VibWl0OiBbXSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXQoKSB7CiAgICAgICAgICB0aGlzLnN1Ym1pdEZvcm0oKTsKICAgIH0sCiAgICBzdWJtaXRGb3JtKCkgewogICAgICAgIHRoaXMuc3VibWl0TWVkaWNpbmVPcmRlcigpOwogICAgICAgIAogICAgfSwKICAgIHN1Ym1pdE1lZGljaW5lT3JkZXIoKSB7CgogICAgICAgIHZhciBsaXN0ID0gdGhpcy5jYXJ0OwogICAgICAgIHZhciB0ZW1wU3RvcmUgPSB7fTsKICAgICAgICB2YXIgdGVtcGxpc3QgPSBbXTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdGVtcFN0b3JlLm1lZGljaW5lTmFtZSA9IGxpc3RbaV0ubWVkaWNpbmVOYW1lOwogICAgICAgICAgICB0ZW1wU3RvcmUucXVhbnRpdHkgPSBsaXN0W2ldLnF1YW50aXR5OwogICAgICAgICAgICB0ZW1wbGlzdC5wdXNoKHRlbXBTdG9yZSk7CiAgICAgICAgICAgIHRlbXBTdG9yZSA9IHt9OwogICAgICAgIH0KCiAgICAgICAgbGV0IHN1Ym1pdE9yZGVyRm9ybSA9IEpTT04uc3RyaW5naWZ5KHtzdWJ0b3RhbDogdGhpcy5wcmljZS8xMDAsIHNoaXBwaW5nQWRkcmVzczogdGhpcy5hZGRyZXNzWzBdLnNoaXBwaW5nQWRkcmVzcywgbWVkaWNpbmVzOnRlbXBsaXN0fSk7CgogICAgICAgIGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICB1cmw6ICJodHRwOi8vZGVjby5sb2dmb3gueHl6L3NlcnZsZXRfcHJvamVjdC9jcmVhdGVNZWRpY2luZU9yZGVyU2VydmxldCIsCgogICAgICAgIGRhdGE6IHFzLnN0cmluZ2lmeShzdWJtaXRPcmRlckZvcm0pLAogICAgICB9KQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogIi9jaGVja291dENvbXBsZXRlZCIgfSk7CiAgICB9LAogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24oKSB7CiAgICAgICAgICB0aGlzLmNhcnQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jYXJ0OwogICAgICAgICAgdGhpcy5wcmljZSA9IHRoaXMuJHN0b3JlLnN0YXRlLnRvdGFsUHJpY2U7CgogICAgICAgICAgdGhpcy5hZGRyZXNzID0gdGhpcy4kc3RvcmUuc3RhdGUuY3VzdG9tZXJBZGRyZXNzLmRhdGEuZmluZCgoaXRlbSkgPT4gewogICAgICAgICAgICAgIHJldHVybiBpdGVtLmRlZmF1bHRBZGRyZXNzID09PSB0cnVlOwogICAgICAgICAgfSk7CiAgfSwKfQo="},{"version":3,"sources":["checkoutMedicine.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"checkoutMedicine.vue","sourceRoot":"src/components/searchMedicine","sourcesContent":["<template>\n    <div>\n        <MedicineTitle titleText=\"Checkout\"></MedicineTitle>\n\n        <div v-for=\"(result, index) in address\" :key=\"index\">\n            <h6>Shipping Address</h6>\n            <p>{{ result.shippingAddress }}</p>\n        </div>\n\n        <div class=\"order-detail\">\n            <van-card v-for=\"(result, index) in cart\" :key=\"index\"\n            :num=\"result.quantity\"\n            :price=\"result.price\"\n            :desc=\"result.medicineDescription\"\n            :title=\"result.medicineName\"\n            thumb=\"https://img01.yzcdn.cn/vant/ipad.jpeg\"\n            />   \n        </div>\n\n        <van-submit-bar :price=\"this.price\" button-text=\"Submit Order\" currency=$ @submit=\"submit\" />\n        <button class=\"trigger\" type=\"submit\" @click=\"submitForm\"></button>\n    </div>\n</template>\n\n<script>\nimport MedicineTitle from \"@/components/MedicineTitle\";\nimport axios from \"axios\";\nimport qs from \"qs\";\n\nexport default {\n    name: \"checkoutMedicine\",\n    components: {\n    MedicineTitle,\n  },\n  data() {\n    return {\n        cart:{},\n        price: \"\",\n        address: {},\n        productSubmit: [],\n    };\n  },\n  methods: {\n    submit() {\n          this.submitForm();\n    },\n    submitForm() {\n        this.submitMedicineOrder();\n        \n    },\n    submitMedicineOrder() {\n\n        var list = this.cart;\n        var tempStore = {};\n        var templist = [];\n        for (var i = 0; i < list.length; i++) {\n            tempStore.medicineName = list[i].medicineName;\n            tempStore.quantity = list[i].quantity;\n            templist.push(tempStore);\n            tempStore = {};\n        }\n\n        let submitOrderForm = JSON.stringify({subtotal: this.price/100, shippingAddress: this.address[0].shippingAddress, medicines:templist});\n\n        axios({\n        method: \"post\",\n        url: \"http://deco.logfox.xyz/servlet_project/createMedicineOrderServlet\",\n\n        data: qs.stringify(submitOrderForm),\n      })\n        this.$router.push({ path: \"/checkoutCompleted\" });\n    },\n  },\n  created: function() {\n          this.cart = this.$store.state.cart;\n          this.price = this.$store.state.totalPrice;\n\n          this.address = this.$store.state.customerAddress.data.find((item) => {\n              return item.defaultAddress === true;\n          });\n  },\n}\n</script>\n\n<style scoped>\n\n.order-detail {\n    overflow: scroll;\n}\n\n.trigger {\n    display: none;\n}\n</style>"]}]}